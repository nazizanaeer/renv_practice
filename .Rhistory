getwd
getwd
1+1
set.seed(7)
n <- 1e6
x <- runif(n, 700, 3000)
D = matrix(c(rep(1,n),x), byrow=F, ncol=2)
theta = matrix(c(-6,0.1),ncol=1)
f1 = function(x){
y=-6+0.1*x
return(y)
}
system.time({
pred = {}
for(i in 1:n){
pred[i]=f1(x[i])
}
})
system.time({
D%*%theta
})
table(D%*%theta==pred) # my two approaches are not giving the same results!!!
set.seed(7)
n <- 1e6
x <- runif(n, 700, 3000)
D = matrix(c(rep(1,n),x), byrow=F, ncol=2)
theta = matrix(c(-6,0.1),ncol=1)
f1 = function(x){
y=-6+0.1*x
return(y)
}
system.time({
pred = {}
for(i in 1:n){
pred[i]=f1(x[i])
}
})
system.time({
D%*%theta
})
table(((D%*%theta)-pred)<=1e-10) # my two approaches are not giving the same results!!!
model <- glm(vaccinated1 ~ enrolled_rp, data = evaluation,
family = binomial)
#| echo = FALSE
library(knitr)
opts_chunk$set(
echo = TRUE, warning = FALSE, message = FALSE
)
library(readxl)
library(gtsummary)
library(labelled)
library(dplyr)
library(broom)
library(lmtest)
library(sandwich)
evaluation <- read_excel("evaluation_wide_format.xlsx")
var_label(evaluation) <- list(
work_hours0 = "Initial Hours Worked by Women (hrs)",
age_hh0 = "Age of Head (years)",
age_sp0 = "Age of Spouse (years)",
educ_hh0 = "Education of Head (completed years of schooling)",
educ_sp0 = "Education of Spouse (completed years of schooling)",
hhsize0 = "Household size",
land0 = "Number of Land Hectares",
hospital_distance0 = "Distance to Closest Hospital (minutes)",
treatment_community = "Treatment Community",
enrolled_rp = "Per-protocol enrollment (0 = Control, 1 = Treatment)"
)
evaluation <- evaluation %>%
mutate(enrolled_rp = factor(
enrolled_rp,
levels = c(0, 1),
labels = c("Control (no daycare use)", "Treatment (regular daycare use)")
))
table1 <- evaluation %>%
filter(!is.na(enrolled_rp)) %>%
select(enrolled_rp, work_hours0, age_hh0, age_sp0, educ_hh0, educ_sp0, hhsize0, treatment_community) %>%
tbl_summary(
by = enrolled_rp,
statistic = all_continuous() ~ "{mean} ({sd})",
digits = all_continuous() ~ 2,
missing = "no"
) %>%
add_p() %>%
add_overall()
table1
evaluation <- evaluation %>%
mutate(enrolled_rp = factor(
enrolled_rp,
levels = c(0, 1),
labels = c("Control (no daycare use)", "Treatment (regular daycare use)")
))
table1 <- evaluation %>%
filter(!is.na(enrolled_rp)) %>%
select(enrolled_rp, work_hours0, age_hh0, age_sp0, educ_hh0, educ_sp0, hhsize0) %>%
tbl_summary(
by = enrolled_rp,
statistic = all_continuous() ~ "{mean} ({sd})",
digits = all_continuous() ~ 2,
missing = "no"
) %>%
add_p() %>%
add_overall()
table1 <- evaluation %>%
filter(!is.na(enrolled_rp)) %>%
select(enrolled_rp, work_hours0, age_hh0, age_sp0, educ_hh0, educ_sp0, hhsize0) %>%
tbl_summary(
by = enrolled_rp,
statistic = all_continuous() ~ "{mean} ({sd})",
digits = all_continuous() ~ 2,
missing = "no"
) %>%
add_p() %>%
add_overall()
var_label(evaluation) <- list(
work_hours0 = "Initial Hours Worked by Women (hrs)",
age_hh0 = "Age of Head (years)",
age_sp0 = "Age of Spouse (years)",
educ_hh0 = "Education of Head (completed years of schooling)",
educ_sp0 = "Education of Spouse (completed years of schooling)",
hhsize0 = "Household size",
land0 = "Number of Land Hectares",
hospital_distance0 = "Distance to Closest Hospital (minutes)",
treatment_community = "Treatment Community",
enrolled_rp = "Per-protocol enrollment (0 = Control, 1 = Treatment)"
)
evaluation <- evaluation %>%
mutate(enrolled_rp = factor(
enrolled_rp,
levels = c(0, 1),
labels = c("Control (no daycare use)", "Treatment (regular daycare use)")
))
table1 <- evaluation %>%
filter(!is.na(enrolled_rp)) %>%
select(enrolled_rp, work_hours0, age_hh0, age_sp0, educ_hh0, educ_sp0, hhsize0) %>%
tbl_summary(
by = enrolled_rp,
statistic = all_continuous() ~ "{mean} ({sd})",
digits = all_continuous() ~ 2,
missing = "no"
) %>%
add_p() %>%
add_overall()
library(readxl)
library(gtsummary)
library(labelled)
library(dplyr)
library(broom)
library(lmtest)
library(sandwich)
evaluation <- read_excel("evaluation_wide_format.xlsx")
var_label(evaluation) <- list(
work_hours0 = "Initial Hours Worked by Women (hrs)",
age_hh0 = "Age of Head (years)",
age_sp0 = "Age of Spouse (years)",
educ_hh0 = "Education of Head (completed years of schooling)",
educ_sp0 = "Education of Spouse (completed years of schooling)",
hhsize0 = "Household size",
land0 = "Number of Land Hectares",
hospital_distance0 = "Distance to Closest Hospital (minutes)",
treatment_community = "Treatment Community",
enrolled_rp = "Per-protocol enrollment (0 = Control, 1 = Treatment)"
)
evaluation <- evaluation %>%
mutate(enrolled_rp = factor(
enrolled_rp,
levels = c(0, 1),
labels = c("Control (no daycare use)", "Treatment (regular daycare use)")
))
table1 <- evaluation %>%
filter(!is.na(enrolled_rp)) %>%
select(enrolled_rp, work_hours0, age_hh0, age_sp0, educ_hh0, educ_sp0, hhsize0) %>%
tbl_summary(
by = enrolled_rp,
statistic = all_continuous() ~ "{mean} ({sd})",
digits = all_continuous() ~ 2,
missing = "no"
) %>%
add_p() %>%
add_overall()
table1
model <- glm(vaccinated1 ~ enrolled_rp, data = evaluation,
family = binomial)
cluster_se <- vcovCL(model, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se)
table2 <- tbl_regression(
model,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
table2
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
a
evaluation <- read_excel("evaluation_wide_format.xlsx")
model <- glm(vaccinated1 ~ enrolled_rp, data = evaluation,
family = binomial)
cluster_se <- vcovCL(model, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se)
table2 <- tbl_regression(
model,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
table2
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
table3 <- tbl_regression(
model,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
table3
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
var_label(evaluation) <- list(
work_hours0 = "Initial Hours Worked by Women (hrs)",
age_hh0 = "Age of Head (years)",
age_sp0 = "Age of Spouse (years)",
educ_hh0 = "Education of Head (completed years of schooling)",
educ_sp0 = "Education of Spouse (completed years of schooling)",
hhsize0 = "Household size",
land0 = "Number of Land Hectares",
hospital_distance0 = "Distance to Closest Hospital (minutes)",
treatment_community = "Treatment Community",
enrolled_rp = "Per-protocol enrollment (0 = Control, 1 = Treatment)"
)
evaluation <- evaluation %>%
mutate(enrolled_rp = factor(
enrolled_rp,
levels = c(0, 1),
labels = c("Control (no daycare use)", "Treatment (regular daycare use)")
))
table1 <- evaluation %>%
filter(!is.na(enrolled_rp)) %>%
select(enrolled_rp, work_hours0, age_hh0, age_sp0, educ_hh0, educ_sp0, hhsize0) %>%
tbl_summary(
by = enrolled_rp,
statistic = all_continuous() ~ "{mean} ({sd})",
digits = all_continuous() ~ 2,
missing = "no"
) %>%
add_p() %>%
add_overall()
table1
model <- glm(vaccinated1 ~ enrolled_rp, data = evaluation,
family = binomial)
cluster_se <- vcovCL(model, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se)
table2 <- tbl_regression(
model,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
table2
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
cluster_se2 <- vcovCL(model2, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se2)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE
) %>%
bold_labels()
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
cluster_se2 <- vcovCL(model2, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se2)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se2,
exponentiate = TRUE
) %>%
bold_labels()
table3
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
cluster_se2 <- vcovCL(model2, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se2)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se2,
exponentiate = TRUE,
label = list(treatment_communirt ~ "Treatment (vs Control")
) %>%
bold_labels()
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
cluster_se2 <- vcovCL(model2, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se2)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se2,
exponentiate = TRUE,
label = list(treatment_community ~ "Treatment (vs Control")
) %>%
bold_labels()
table3
model2 <- glm(vaccinated1 ~ treatment_community, data = evaluation,
family = binomial)
cluster_se2 <- vcovCL(model2, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se2)
table3 <- tbl_regression(
model2,
conf.int = TRUE,
vcov = cluster_se2,
exponentiate = TRUE,
label = list(treatment_community ~ "Treatment (vs Control)")
) %>%
bold_labels()
table3
model <- glm(vaccinated1 ~ enrolled_rp, data = evaluation,
family = binomial)
cluster_se <- vcovCL(model, cluster = evaluation$community_id)
coeftest(model, vcov = cluster_se)
table2 <- tbl_regression(
model,
conf.int = TRUE,
vcov = cluster_se,
exponentiate = TRUE,
label = list(enrolled_rp ~ "Treatment (vs Control)")
) %>%
bold_labels()
table2
both_regression_tables_filename <- paste0(
"both_regression_tables_config_",
WHICH_CONFIG,
".rds"
)
WHICH_CONFIG <- Sys.getenv("WHICH_CONFIG")
config_list <- config::get(
config = WHICH_CONFIG
)
# control two types of reports w/ eval
library(knitr)
opts_chunk$set(
echo=FALSE, warning=FALSE, message=FALSE
)
here::i_am("hiv_report.Rmd")
data <- readRDS(
file = here::here("output/data_clean.rds")
)
library(broom.helpers)
library(car)
library(parameters)
table_one <- readRDS(
file = here::here("output/table_one.rds")
)
table_one
#| fig.align = "center",
#| out.width = "600px"
knitr::include_graphics(
here::here("output/scatterplot.png")
)
both_regression_tables_filename <- paste0(
"both_regression_tables_config_",
WHICH_CONFIG,
".rds"
)
both_regression_tables <- readRDS(
file = here::here("output", both_regression_tables_filename)
)
both_regression_tables_filename <- paste0(
"both_regression_tables_config_",
WHICH_CONFIG,
".rds"
)
both_regression_tables <- readRDS(
file = here::here("output", both_regression_tables_filename.rds)
)
both_regression_tables_filename <- paste0(
"both_regression_tables_config_",
WHICH_CONFIG,
".rds"
)
both_regression_tables <- readRDS(
file = here::here("output", both_regression_tables_filename)
)
both_regression_tables_filename <- paste0(
"both_regression_tables_config_",
WHICH_CONFIG,
".rds"
)
both_regression_tables <- readRDS(
file = here::here("output", both_regression_tables_filename)
)
getwd()
setwd("~/Documents/R/DATA550/collaborating_using_renv")
setwd("/Users/nazizanaeer/Documents/R/DATA550/class_11/collaborating_using_renv")
getwd()
renv::init()
getwd()
renv::restore()
renv::restore()
renv::activate()
renv::restore()
